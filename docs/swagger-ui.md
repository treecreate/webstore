# Swagger UI documentation

Swagger UI is a tool for generation of API documentation based off of the defined controllers, endpoints and models

## Table of Contents

-   [Viewing the docs](#viewing-the-docs)
-   [Swagger Config](#swagger-config)
    -   [Config structure](#swagger-config)
    -   [Pom.xml dependencies](#pom.xml-dependencies)
-   [Controller documentation](#controller-documentation)
    -   [Documenting the controller](#controller-documentation)
    -   [Method-specific annotations](#method-specific-annotations)
    -   [Prevent a controller/method from being documented](#prevent-a-controller/method-from-being-documented)
-   [Models](#models)
-   [Resources](#resources)
-   [Extra notes](#extra-notes)

---

## Viewing the docs

The docs are automatically generated and available at [`localhost:5000/docs`](localhost:5000/docs)\
Same logic applies to viewing docs of a deployed instance, for example [`api.treecreate.dk/docs`](api.treecreate.dk/docs)

## Swagger Config

Swagger UI is a visual representation of a json generated by SpringFox. Thus, the config class is [`SpringFoxConfig`](../apps/api/src/main/java/dk/treecreate/api/config/SpringFoxConfig.java)

The config consists of two parts, a `Docket` called api, and a method that returns api info like title, version and description.\
The docket is the config responsible how and what parts of the API get shown

Details regarding what different options do are included in the config as comments.\
For more information you can read guides like [the baeldung one](https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api), although they don't explain every option

### Pom.xml dependencies

There are two dependencies in the [`pom.xml`](../apps/api/pom.xml). One is a springfox starter for springboot, and the second if the swagger UI responsible for visual representation of the docs

## Controller documentation

Adding the `@Controller` and `@RestController` annotations to a class automatically adds it to the list of documented controllers, and subsequently that controller is documented

There is a large number of annotations that provide more information to the API docs

### Method-specific annotations

`@ApiOperation(<string>)` will change the default name of the method in the docs to one you specify\
![image](https://user-images.githubusercontent.com/22862227/110999598-e8387a00-8380-11eb-840a-963ab45c7766.png)

### Prevent a controller/method from being documented

To hide a controller, it can be annotated with `@ApiIgnore`, just like the [`DocsController`](../apps/api/src/main/java/dk/treecreate/api/docs/DocsController.java) is.\
Same can be done with methods

## Models

Swagger UI also documents models used by the API.\
In order for a model to be documented, it has to be declared as an `@Entity`, have a corresponding Repository interface and be returned/required by one of the controller methods

The annotations used to describe the model attributes will be reflected in the docs.\
Following annotations can be used to provide more info\
`@ApiModelProperty` - includes multiple parameters like value, required (boolean) and example. The value parameter can be used as description of an attribute\
`@Min()` and `@Max()` annotations are used to provide extra information on the values allowed for the given attribute.

A model attribute annotated like this:

```java
  @ApiModelProperty(value = "Age of the test. Describe the attribute here")
  @Min(value = 15, message = "Age should not be less than 15")
  @Max(value = 65, message = "Age should not be greater than 65")
  private int age;
```

will result in the following docs entry

![image](https://user-images.githubusercontent.com/22862227/111000195-e58a5480-8381-11eb-82ca-61af52574b9a.png)

## Resources

-   [Full list of annotations](https://github.com/swagger-api/swagger-core/wiki/Annotations-1.5.X) - not all of them have to be used\
-   [Baeldung guide](https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api) - does not show all features

## Extra notes

As far as I know, it is not possible to easily add a description to a controller.\
The easiest way is to add `@Api(value="Controller name", description="Controller description")` but it has been deprecated. Instead you are supposed to use tags but it is far more complex.

Tags are also used to group multiple rest controllers together
