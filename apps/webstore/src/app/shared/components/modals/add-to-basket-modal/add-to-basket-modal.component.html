<div class="modal-container add-transition">
    <form
        [formGroup]="addToBasketForm"
        (ngSubmit)="submit()"
        class="modal-content"
    >
        <div class="option-title">
            <div class="title">
                <span i18n="@@title">Title</span>
                <webstore-info-popover
                    title="Title"
                    text="Add a good title so you can keep track of your designs."
                ></webstore-info-popover>
            </div>
            <div class="option-design-title add-transition">
                <input
                    type="text"
                    class="title-input"
                    placeholder="Untitled-1"
                    formControlName="title"
                />
            </div>
        </div>

        <!-- quantity -->
        <div class="option-quantity add-transition">
            <div class="text">
                <span i18n="@@amount"> Amount </span>
                <webstore-info-popover
                    title="Quantity"
                    text="The quantity of designs you wish to purchase."
                ></webstore-info-popover>
            </div>
            <div class="option add-transition">
                <button
                    type="button"
                    class="box-size-plus tc-button-sm-square low-dropshadow"
                    (click)="decreaseQuantity()"
                    [disabled]="
                        this.addToBasketForm.get('quantity').value === 1
                    "
                    id="decrease-quantity-btn"
                >
                    <div class="icon">
                        <div class="button-minus"></div>
                    </div>
                </button>
                <div class="quantity">
                    {{ this.addToBasketForm.get('quantity').value }}
                </div>
                <button
                    type="button"
                    class="box-size-plus tc-button-sm-square low-dropshadow"
                    (click)="increaseQuantity()"
                    id="increase-quantity-btn"
                >
                    <div class="button-plus"></div>
                </button>
            </div>
        </div>

        <!-- size -->
        <div class="option-size add-transition">
            <div class="text">
                <span i18n="@@size"> Size </span>
                <webstore-info-popover
                    title="Size"
                    text="The size of your design. You can choose between 20x20cm, 25x25cm and 30x30cm."
                ></webstore-info-popover>
            </div>
            <div class="option add-transition">
                <button
                    type="button"
                    class="box-size-plus tc-button-sm-square low-dropshadow"
                    (click)="decreaseSize()"
                    [disabled]="
                        this.addToBasketForm.get('dimension').value === 'SMALL'
                    "
                    id="decrease-size-btn"
                >
                    <div class="icon">
                        <div class="button-minus"></div>
                    </div>
                </button>
                <div class="quantity">
                    {{ this.addToBasketForm.get('dimension').value }}
                </div>
                <button
                    type="button"
                    class="box-size-plus tc-button-sm-square low-dropshadow"
                    (click)="increaseSize()"
                    [disabled]="
                        this.addToBasketForm.get('dimension').value === 'LARGE'
                    "
                    id="increase-size-btn"
                >
                    <div class="button-plus"></div>
                </button>
            </div>
        </div>

        <!-- Price -->
        <div class="price-container">
            <div class="isnt-more-than-4 add-transition" *ngIf="!isMoreThan4">
                <span i18n="@@save-25%">Save 25%</span
                ><span>
                    <span i18n="@@order">order </span>
                    <!-- TODO: Make this display the full amount of items in the basket -->
                    <!-- So it looks like this: 4 - ( addToBasketForm.get('amount') + all basket items )  -->
                    {{ 4 - addToBasketForm.get('quantity').value }} more</span
                >
            </div>
            <div class="is-more-than-4 add-transition" *ngIf="isMoreThan4">
                <span i18n="@@you-save-25%">You save: (-25%)</span
                ><span>{{ (price * 0.25).toFixed(2) }}</span>
            </div>
            <div class="price add-transition">
                <span i18n="@@price">Price:</span
                ><span>{{
                    isMoreThan4 ? (price * 0.75).toFixed(2) : price.toFixed(2)
                }}</span>
            </div>
        </div>

        <!-- Actions -->
        <div class="option-actions add-transition">
            <div class="button-container add-transition">
                <button
                    class="tc-button-100 green"
                    type="submit"
                    [disabled]="
                        !this.addToBasketForm.get('title').dirty ||
                        this.addToBasketForm.get('title').invalid
                    "
                >
                    <span i18n="@@add-to-basket" *ngIf="!isLoading"
                        >Add to basket</span
                    >
                    <span
                        *ngIf="isLoading"
                        class="spinner-border spinner-border-sm text-light"
                        style="margin: 5px"
                        role="status"
                        aria-hidden="true"
                    ></span>
                </button>
                <button
                    type="button"
                    class="tc-button-100"
                    type="button"
                    (click)="activeModal.close()"
                    i18n="@@cancel"
                >
                    Cancel
                </button>
            </div>
        </div>

        <!-- Extra info -->
        <div class="text-container add-transition">
            <div class="extra-info add-transition">
                <strong i18n="@@note">Note:</strong><br />
                <span i18n="@@add-to-basket-extra-info">
                    For every design you purchase, you are automatically
                    planting a tree. Thereby you support re-floreshing the
                    forrests, which has never been a more vital task.
                </span>
                <br />
                <strong>
                    <span i18n="@@thank-you-message"
                        >THANK YOU FOR YOUR SUPPORT!</span
                    ></strong
                >
            </div>
        </div>
    </form>
</div>
